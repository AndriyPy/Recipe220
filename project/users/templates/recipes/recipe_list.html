{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartRecipe - Recipes</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="https://i.postimg.cc/jdx5Zczz/rounded-in-photoretrica.png">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
        body{background:#F9F9F7;display:flex;flex-direction:column;min-height:100vh;}
        nav{display:flex;justify-content:space-between;align-items:center;padding:15px 50px;background:white;box-shadow:0 2px 15px rgba(0,0,0,0.05);position:sticky;top:0;z-index:100;}
        .logo-container{display:flex;align-items:center;gap:10px;font-weight:700;font-size:22px;color:#2D4635;}
        .logo-icon{color:#F58220;font-size:26px;}
        .nav-links{display:flex;gap:30px;}
        .nav-links a{text-decoration:none;color:#555;font-size:14px;font-weight:600;}
        .nav-links a.active{color:#F58220;}
        .nav-auth{display:flex;align-items:center;gap:20px;}
        .btn-login{text-decoration:none;color:#000;font-weight:700;font-size:13px;padding:8px 16px;}
        .btn-signup{background:#F58220;color:white;padding:10px 25px;border-radius:25px;text-decoration:none;font-weight:700;font-size:13px;}
        .nav-user{font-size:14px;font-weight:600;color:#2D4635;background:rgba(137,160,139,0.1);padding:8px 20px;border-radius:25px;border:1px solid rgba(45,70,53,0.1);}
        .hero-section{background:linear-gradient(rgba(45,70,53,0.7),rgba(45,70,53,0.8)),url('https://images.unsplash.com/photo-1546069901-ba9599a7e63c?q=80&w=1780&auto=format&fit=crop')center/cover;background-attachment:fixed;padding:120px 20px;text-align:center;color:white;}
        .hero-content{max-width:800px;margin:0 auto;}
        .hero-content h1{font-family:'Playfair Display',serif;font-size:64px;margin-bottom:20px;text-shadow:2px 2px 4px rgba(0,0,0,0.3);}
        .hero-content h1 span{color:#F58220;}
        .hero-subtitle{font-size:22px;font-style:italic;text-shadow:1px 1px 2px rgba(0,0,0,0.3);}
        .recipes-section{padding:60px 50px;max-width:1400px;margin:0 auto;width:100%;}
        .recipe-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:30px;}
        .recipe-card{background:white;border-radius:20px;overflow:hidden;box-shadow:0 5px 20px rgba(0,0,0,0.03);transition:transform 0.2s,box-shadow 0.2s;border:1px solid rgba(0,0,0,0.05);display:flex;flex-direction:column;}
        .recipe-card:hover{transform:translateY(-5px);box-shadow:0 15px 30px rgba(0,0,0,0.1);}
        .recipe-image{width:100%;height:220px;object-fit:cover;background:#f0f0f0;}
        .recipe-content{padding:25px;flex:1;display:flex;flex-direction:column;}
        .recipe-title{font-size:22px;font-weight:700;color:#2D4635;margin-bottom:12px;}
        .recipe-rating{display:flex;align-items:center;gap:5px;margin-bottom:15px;color:#ffb700;font-size:15px;}
        .rating-value{color:#666;margin-left:8px;font-weight:500;}
        .recipe-description{color:#666;font-size:15px;line-height:1.6;margin-bottom:20px;flex:1;}
        .recipe-meta{display:flex;gap:20px;margin-top:10px;font-size:14px;color:#555;flex-wrap:wrap;padding-top:15px;border-top:2px solid #f5f5f5;}
        .recipe-meta i{color:#F58220;margin-right:8px;width:18px;}
        .empty-state{text-align:center;padding:80px 20px;background:white;border-radius:20px;grid-column:1/-1;}
        .empty-state i{font-size:70px;color:#89A08B;margin-bottom:25px;}
        .empty-state p{color:#666;font-size:20px;}

        /* Pagination styles */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 50px;
            flex-wrap: wrap;
        }
        .pagination a, .pagination span {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 40px;
            height: 40px;
            padding: 0 12px;
            border-radius: 10px;
            background: white;
            color: #2D4635;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            border: 1px solid #e0e0e0;
            transition: all 0.2s;
        }
        .pagination a:hover {
            background: #F58220;
            color: white;
            border-color: #F58220;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(245,130,32,0.2);
        }
        .pagination .current {
            background: #2D4635;
            color: white;
            border-color: #2D4635;
        }
        .pagination .step-links {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .pagination-info {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-top: 20px;
        }

        @media (max-width:900px){
            nav{padding:15px 30px;}
            .nav-links{display:none;}
            .hero-section{padding:80px 20px;background-attachment:scroll;}
            .hero-content h1{font-size:48px;}
            .hero-subtitle{font-size:20px;}
            .recipes-section{padding:40px 20px;}
        }
        @media (max-width:600px){
            .logo-container span:last-child{display:none;}
            .nav-auth{gap:10px;}
            .btn-signup{padding:10px 20px;}
            .hero-content h1{font-size:36px;}
            .hero-subtitle{font-size:18px;}
            .recipe-grid{grid-template-columns:1fr;}
            .pagination a, .pagination span {
                min-width: 35px;
                height: 35px;
                padding: 0 8px;
                font-size: 13px;
            }
        }
        @keyframes fadeInUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}
        .hero-content,.recipe-card{animation:fadeInUp 0.6s ease-out;}
    </style>
</head>
<body>
<nav>
    <div class="logo-container"><span class="logo-icon"><i class="fas fa-carrot"></i></span><span>SmartRecipe</span></div>
    <div class="nav-links"><a href="#">COMPASS</a><a href="{% url 'recipe_list' %}" class="active">RECIPES</a><a href="#">DIET</a><a href="#">COMMUNITY</a></div>
    <div class="nav-auth">
        {% if user.is_authenticated %}
        <div class="nav-user"><i class="fas fa-user"></i> {{ user.username }}</div>
        {% else %}
        <a href="{% url 'login' %}" class="btn-login">LOG IN</a>
        <a href="{% url 'registration' %}" class="btn-signup">SIGN UP</a>
        {% endif %}
    </div>
</nav>

<section class="hero-section">
    <div class="hero-content">
        <h1>Our <span>Recipes</span></h1>
        <p class="hero-subtitle">"Discover delicious and healthy recipes for every occasion"</p>
    </div>
</section>

<section class="recipes-section">
    <div class="recipe-grid">
        {% for recipe in page_obj %}
        <div class="recipe-card">
            {% if recipe.image_url %}
            <img src="{{ recipe.image_url }}" alt="{{ recipe.name }}" class="recipe-image" onerror="this.src='https://via.placeholder.com/400x220?text=No+Image'">
            {% else %}
            <div class="recipe-image" style="background:linear-gradient(135deg,#f5f5f5,#e0e0f0);display:flex;align-items:center;justify-content:center;"><i class="fas fa-utensils" style="font-size:60px;color:#ccc;"></i></div>
            {% endif %}
            <div class="recipe-content">
                <h3 class="recipe-title">{{ recipe.name }}</h3>
                {% if recipe.rating %}
                <div class="recipe-rating">
                    {% for i in "12345"|make_list %}{% if forloop.counter <= recipe.rating|add:0 %}<i class="fas fa-star"></i>{% else %}<i class="far fa-star"></i>{% endif %}{% endfor %}
                    <span class="rating-value">({{ recipe.rating }}/5)</span>
                </div>
                {% endif %}
                {% if recipe.description %}<p class="recipe-description">{{ recipe.description|truncatewords:20 }}</p>{% endif %}
                <div class="recipe-meta">
                    {% if recipe.total_time %}<span><i class="far fa-clock"></i> {{ recipe.total_time }}</span>{% endif %}
                    {% if recipe.servings %}<span><i class="fas fa-utensils"></i> {{ recipe.servings }} servings</span>{% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <div class="empty-state"><i class="fas fa-utensils"></i><p>No recipes found</p></div>
        {% endfor %}
    </div>

    {% if page_obj.has_other_pages %}
    <div class="pagination">
        <div class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1"><i class="fas fa-angle-double-left"></i></a>
                <a href="?page={{ page_obj.previous_page_number }}"><i class="fas fa-angle-left"></i></a>
            {% endif %}

            {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                    <span class="current">{{ num }}</span>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                    <a href="?page={{ num }}">{{ num }}</a>
                {% endif %}
            {% endfor %}

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}"><i class="fas fa-angle-right"></i></a>
                <a href="?page={{ page_obj.paginator.num_pages }}"><i class="fas fa-angle-double-right"></i></a>
            {% endif %}
        </div>
    </div>
    <div class="pagination-info">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </div>
    {% endif %}
</section>
</body>
</html>